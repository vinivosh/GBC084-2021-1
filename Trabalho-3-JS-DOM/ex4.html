<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./ex4-styles.css">
    <title>Exercício 4</title>
</head>
<body>
    <!-- <header>
        <h1>Título</h1>
    </header> -->

    <main>
        <div class="loginBox">
            <h3>Cadastro de Usuário</h3>

            <form name="formCad" action="">
                <div>
                    <label for="user">Usuário:</label>
                    <input type="text" name="user" id="user">
                    <span></span>
                </div>

                <div>
                    <label for="passw">Senha:</label>
                    <input type="password" name="passw" id="passw">
                    <span></span>
                </div>

                <div>
                    <label for="email">E-mail:</label>
                    <input type="email" name="email" id="email">
                    <span></span>
                </div>

                <button>Cadastrar</button>
            </form>
        </div>          
    </main>
    
    <script>
        window.onload = () =>{  //Função que é chamada quando a página é carregada
            document.forms.formCad.onsubmit = validateForm  //Fazendo a ação ao submeter o form ser a chamada da função validateForm()
        }

        function validateForm(e){
            let form = e.target //Selecionamos qual form está sendo validado
            let formValido = true   //Essa variável define se o form está de fato válido ou não

            const spanUser = form.user.nextElementSibling   //Selecionando o próximo elemento irmão do form de nome "user", que será o <span> abaixo dele
            const spanPassw = form.passw.nextElementSibling   //Fazendo o mesmo para o form de nome "passw"
            const spanEmail = form.email.nextElementSibling   //Fazendo o mesmo para o form de nome "email"

            spanUser.textContent = ''   //Esvaziando o conteúdo de todos os spans…
            spanPassw.textContent = ''
            spanEmail.textContent = ''

            if (form.user.value === ''){    //Se o form de nome "user" estiver vazio…
                spanUser.textContent = 'O campo "usuário" deve ser preenchido…' //Inserimos a mensagem de erro no span correspondente
                formValido = false  //Fazemos o form se tornar inválido
            }

            if (form.passw.value === ''){    //Se o form de nome "passw" estiver vazio…
                spanPassw.textContent = 'O campo "senha" deve ser preenchido…' //Inserimos a mensagem de erro no span correspondente
                formValido = false  //Fazemos o form se tornar inválido
            }

            if (form.email.value === ''){    //Se o form de nome "email" estiver vazio…
                spanEmail.textContent = 'O campo "e-mail" deve ser preenchido…' //Inserimos a mensagem de erro no span correspondente
                formValido = false  //Fazemos o form se tornar inválido
            }

            // e.preventDefault()  //Previne o comportamento padrão do form
            return formValido
        }
    </script>
</body>
</html>